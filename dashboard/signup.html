<!DOCTYPE html>
<html>
<head>
    <title>Signup - SmartClean</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>

<div class="card">
    <h1>Create Account</h1>

    <input id="username" placeholder="Choose username">
    <input id="password" type="password" placeholder="Choose password">

    <button id="btnSignup">Signup</button>

    <div class="link" onclick="location.href='login.html'">
        Already have an account?
    </div>

    <p id="msg" style="color:red;text-align:center;"></p>
</div>

<script src="common.js"></script>

<script>
btnSignup.onclick = async () => {
    msg.textContent = "Processing...";

    const fd = new FormData();
    fd.append("username", username.value);
    fd.append("password", password.value);

    const r = await fetch(API + "/register", { method: "POST", body: fd });
    const j = await r.json();

    if (!r.ok) return msg.textContent = j.detail;

    msg.style.color = "green";
    msg.textContent = "Account created! Redirecting...";

    setTimeout(() => location.href = "login.html", 1200);
};
</script>

</body>
</html>
